CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

PROJECT(sip)

FIND_PACKAGE(PythonLibs REQUIRED)
FIND_PACKAGE(PythonInterp REQUIRED)

IF (PYTHONLIBS_FOUND AND PYTHONINTERP_FOUND)
  IF (NOT EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/siplib/sip.h)
	EXECUTE_PROCESS(COMMAND ${PYTHON_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/configure.py 
				-b ${CMAKE_CURRENT_BINARY_DIR}/sipgen -e ${CMAKE_CURRENT_SOURCE_DIR}/siplib
				-d ${CMAKE_CURRENT_BINARY_DIR}/siplib
                        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
		        OUTPUT_QUIET)
  ENDIF() 					
  ADD_SUBDIRECTORY(siplib)
ENDIF(PYTHONLIBS_FOUND AND PYTHONINTERP_FOUND)


