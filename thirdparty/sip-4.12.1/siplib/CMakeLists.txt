INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_DIR} ${PYTHON_INCLUDE_PATH})

SET(siplib_SRCS
    apiversions.c
    bool.cpp
    descriptors.c
    objmap.c
    qtlib.c
    siplib.c
    threads.c
    voidptr.c
)

SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -w ")
SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -w ")

ADD_LIBRARY(${SIP_LIB} SHARED ${siplib_SRCS})

SET_TARGET_PROPERTIES(${SIP_LIB} 
		      PROPERTIES OUTPUT_NAME sip PREFIX "")

IF(WIN32)
SET_TARGET_PROPERTIES(${SIP_LIB} 
		      PROPERTIES SUFFIX ".pyd")
ELSE(WIN32)
SET_TARGET_PROPERTIES(${SIP_LIB} 
		      PROPERTIES SUFFIX ".so")		      
ENDIF(WIN32)

TARGET_LINK_LIBRARIES(${SIP_LIB} ${PYTHON_LIBRARY})

INSTALL(TARGETS ${SIP_LIB}
  RUNTIME DESTINATION ${TulipBinInstallDir} COMPONENT sip
  LIBRARY DESTINATION ${TulipLibInstallDir} COMPONENT sip
  ARCHIVE DESTINATION ${TulipLibInstallDir} COMPONENT sip)
