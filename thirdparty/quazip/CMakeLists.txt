FILE(GLOB SRCS *.cpp *.c)
QT4_WRAP_CPP(MOC_SRCS quazipfile.h)

INCLUDE_DIRECTORIES(${ZLIB_INCLUDE_DIR} ${QT_INCLUDE_DIR})

ADD_DEFINITIONS(-DQUAZIP_BUILD)

IF(MSVC)
STRING(REGEX REPLACE "/W[0-9]" "/W0" CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS}")
STRING(REGEX REPLACE "/W[0-9]" "/W0" CMAKE_C_FLAGS "${CMAKE_C_FLAGS}")
ELSE(MSVC)
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -w ")
SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -w ")
ENDIF(MSVC)

ADD_LIBRARY(quazip SHARED ${SRCS} ${MOC_SRCS})

TARGET_LINK_LIBRARIES(quazip ${ZLIB_LIBRARY} ${QT_LIBRARIES})

INSTALL(TARGETS quazip
       RUNTIME DESTINATION ${TulipBinInstallDir} COMPONENT quazip
       LIBRARY DESTINATION ${TulipLibInstallDir} COMPONENT quazip
       ARCHIVE DESTINATION ${TulipLibInstallDir} COMPONENT quazip)
